<!DOCTYPE html>
<html lang="en">
	<head>
		<title>用户列表</title>
        {% include "../common/header.html"%}
	</head>

	<body>
		<div class="navbar navbar-default" id="navbar">
			<script type="text/javascript">
				try{ace.settings.check('navbar' , 'fixed')}catch(e){}
			</script>
			{% include "../common/ace_head.html" %}		
		</div>

		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

			<div class="main-container-inner">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<div class="sidebar" id="sidebar">
					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
					</script>

					<div class="sidebar-shortcuts" id="sidebar-shortcuts">
						<div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
							<button class="btn btn-success">
								<i class="icon-signal"></i>
							</button>

							<button class="btn btn-info">
								<i class="icon-pencil"></i>
							</button>

							<button class="btn btn-warning">
								<i class="icon-group"></i>
							</button>

							<button class="btn btn-danger">
								<i class="icon-cogs"></i>
							</button>
						</div>

						<div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
							<span class="btn btn-success"></span>

							<span class="btn btn-info"></span>

							<span class="btn btn-warning"></span>

							<span class="btn btn-danger"></span>
						</div>
					</div><!-- #sidebar-shortcuts -->

					{% include "../common/ace_left.html" %}

					<div class="sidebar-collapse" id="sidebar-collapse">
						<i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>
					</div>

					<script type="text/javascript">
						try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
					</script>
				</div>
	
				<div class="main-content">
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
						</script>

						<ul class="breadcrumb">
							<li>
								<i class="icon-home home-icon"></i>
								<a href="#">首页</a>
							</li>
							<li class="active">用户管理</li>
						</ul><!-- .breadcrumb -->
					</div>
						<div class="page-content">			
						<div class="row">
							<div class="col-xs-12">
								<!-- PAGE CONTENT BEGINS -->

								<div class="alert alert-info">
									<i class="icon-hand-right"></i>
									用户管理
									<button class="close" data-dismiss="alert">
										<i class="icon-remove"></i>
									</button>
								</div>


                                <div class="col-sm-6" style="width: 100%;float: none;padding-left: 0px; ">
                                    <div class="widget-box">
                                        <div class="widget-header" style="background: none repeat scroll 0 0 #307ecc;">
                                            <h4 style="color: #fff;font-size: 15px;" >查询</h4>
                                        </div>

                                        <div class="widget-body">
                                            <div class="widget-main">
                                                <label>用户昵称:&nbsp;</label><input class="input-sm" placeholder="用户昵称" id="nick_name" />
                                                <label>手机号:&nbsp;</label><input class="input-sm" placeholder="手机号" id="phone" />
                                                <div>
                                                    <div style="float: right;padding-right: 50px;">
                                                         <button class="btn" onclick="gridReload()">确定</button>
                                                         <button class="btn" onclick="clearGrid()">清除</button>
                                                    </div>
                                                    <div style="clear: both;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

								<div style="clear: both;"></div>
								<table id="list2"></table>
								<div id="pager2"></div>
								<script type="text/javascript">
									var $path_base = "/";//this will be used in gritter alerts containing images
								</script>

								<!-- PAGE CONTENT ENDS -->
							</div><!-- /.col -->
						</div><!-- /.row -->
					</div><!-- /.page-content -->
				</div><!-- /.main-content -->
			
			</div><!-- /.main-container-inner -->

			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="icon-double-angle-up icon-only bigger-110"></i>
			</a>
		</div><!-- /.main-container -->
        {% include "../common/footer.html"%}
		<script type="text/javascript">


      function gridReload(){
            var nick_name = jQuery("#nick_name").val();
            var phone = jQuery("#phone").val();
            var param = "?nick_name="+nick_name+"&phone="+phone;
            jQuery("#list2").jqGrid('setGridParam',{url:"/v1/user/inner/ajax"+param,page:1}).trigger("reloadGrid");
        }

        function clearGrid(){
            jQuery("#list2").jqGrid('setGridParam',{url:"/v1/user/inner/ajax",page:1}).trigger("reloadGrid");
        }



		jQuery(function($) {
											
			var grid_selector = "#list2";
			var pager_selector = "#pager2";		
			jQuery(grid_selector).jqGrid({
				//direction: "rtl",	
				url:"/v1/user/inner/ajax",
				datatype: "json",
                height: "auto",
                width:$(window).width()-300,
                autowidth:false,
                shrinkToFit:false,
				colNames:['操作', '用户ID','用户昵称','email', 'phone','角色','创建时间'],
				colModel:[
					{name:'act',index:'act', width:55,sortable:false,formatter:function(cellvalue, options, rowdata){

						id = rowdata.id ;
						be = 
						 '<div style="margin-left:8px;">' +
						 '<div  style="float:left;margin-left:5px;" title="编辑" class="ui-pg-div ui-inline-edit">'+
						 '	<a target = "_blank" href="/v1/user/'+id+'/inner"><span class="ui-icon ui-icon-pencil"></span></a>'+
						 '</div>'+
						 '</div>'; 
						 return be; 
					}},
                         {name:'id',index:'id'},
                         {name:'nick_name',index:'nick_name'},
                         {name:'email',index:'email'},
                         {name:'phone',index:'phone'},
                         {name:'role_names',index:'role_names'},
                         {name:'create_date',index:'create_date'},
                     			],
				viewrecords : true,
				rowNum:50,
				rowList:[10,50,100],
				pager : pager_selector,
				altRows: true,
				multiselect: true,
		        multiboxonly: true,		
				loadComplete : function() {
					var table = this;
					setTimeout(function(){
						styleCheckbox(table);						
						updateActionIcons(table);
						updatePagerIcons(table);
						enableTooltips(table);
					}, 0);
				},

				caption: "用户详细信息"
			});
	

		});
		</script>
</body>
</html>
